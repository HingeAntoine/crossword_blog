{% extends "base.html" %}
{% load static %}

{% block page_content %}

<script type="text/javascript" src="{% static 'js/misc.js' %}"></script>
<script type="text/javascript" src="{% static 'js/cluesgroup.js' %}"></script>
<script type="text/javascript" src="{% static 'js/word.js' %}"></script>
<script type="text/javascript" src="{% static 'js/crosswords.js' %}"></script>
<script type="text/javascript" src="{% static 'js/puz.js' %}"></script>

<!-- TOP BAR: Title and buttons-->
<div class="row mt-2">
    <h1 class="col-sm-6">{{ project.title }}</h1>

    <p class="span1 px-1">
        <button type="button" class="btn btn-secondary btn-warning px-3" id="timer-button">Lancer le chrono</button>
        <button type="button" class="btn btn-secondary btn-warning px-1" id="file-save">Sauver</button>
    </p>

    <div class="dropdown px-1">
        <a class="btn btn-secondary btn-warning dropdown-toggle"
           role="button"
           id="dropdownReveal"
           data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false">
            Révéler
        </a>

        <div class="dropdown-menu" aria-labelledby="dropdownReveal">
            <a class="dropdown-item" id="reveal-letter">Lettre</a>
            <a class="dropdown-item" id="reveal-word">Mot</a>
            <a class="dropdown-item" id="reveal-puzzle">Grille</a>
        </div>
    </div>

    <div class="dropdown px-1">
        <a class="btn btn-secondary btn-warning dropdown-toggle"
           role="button"
           id="dropdownCheck"
           data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false">
            Vérifier
        </a>

        <div class="dropdown-menu" aria-labelledby="dropdownCheck">
            <a class="dropdown-item" id="check-letter">Lettre</a>
            <a class="dropdown-item" id="check-word">Mot</a>
            <a class="dropdown-item" id="check-puzzle">Grille</a>
        </div>
    </div>
</div>

<!-- ALERT BARS -->
<div class="row alert alert-success alert-dismissible fade show h5 align-middle" id="finish-success" role="alert">
    <i class="em em-sparkles" aria-role="presentation" aria-label="SPARKLES"></i>
    <strong>Bravo!</strong> Vous avez fini la grille.
    <i class="em em-sparkles" aria-role="presentation" aria-label="SPARKLES"></i>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<div class="row alert alert-warning alert-dismissible fade show h5 align-middle" id="finish-warning" role="alert">
    <i class="em em-warning" aria-role="presentation" aria-label="WARNING SIGN"></i>
    ️<strong>Attention!</strong>️ La grille est pleine mais il reste des erreurs.
    <i class="em em-warning" aria-role="presentation" aria-label="WARNING SIGN"></i>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<!-- CLUE ZOOM-->
<h4 class="row mt-2 px-2" id="cw-top-text"></h4>

<!-- GRID AND CLUE LIST -->
<div class="crossword mt-2">
    <div class="cw-main auto normal">
        <input type="text" id="hidden-input" style="opacity: 0; position: fixed; top: -100px; left: -100px; width: 0; height: 0; z-index: -1;">
        <div class="row">
            <div class="col-lg-6" id="cw-canvas-holder">
                <canvas id="cw-canvas" style="display: block; margin: 0 auto;"></canvas>
            </div>
            <div class="cw-clues cw-clues-top d-none d-lg-block col-md-3" id="cw-clues-top">
                <div class="cw-clues-title"><h5><b>Horizontalement</b></h5></div>
                <div class="cw-clues-items"></div>
            </div>
            <div class="cw-clues cw-clues-bottom d-none d-lg-block col-md-3" id="cw-clues-bottom">
                <div class="cw-clues-title"><h5><b>Verticalement</b></h5></div>
                <div class="cw-clues-items"></div>
            </div>
            <div class="cw-clues-holder " id="cw-clues-holder"></div>
        </div>
    </div>
</div>

<script>
(function(){
    var params1 = {
      hover_enabled: false,
      settings_enabled: false,
      color_selected: '#ff7171',
      color_word: '#ffaa71',
      color_hilite: '#ececec',
      savegame_name: '{{ project.pk }}',
      puzzle_file: {url: '{{ project.grid_file.url }}', type: 'puz'}
    };
    CrosswordNexus.createCrossword($('div.crossword'), params1);
})();

</script>
{% endblock %}
